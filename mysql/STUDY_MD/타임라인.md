# 타임라인

## 타임라인이란
- a.k.a. 뉴스피드
- 트위터, 페이스북, 인스타그램 등 SNS에서 팔로워들의 게시물을 보여주는 피드 

### 서비스가 커질수록 느려지는 타임라인

#### 타임라인 구현 흐름 
1. 회원의 팔로우 목록 조회
2. 1번의 팔로우 회원 id로 게시물 조회

#### 타임라인 구현의 시간 복잡도 
- `log(Follow 전체 레코드)`
- `+` 
- `해당 회원의 팔로잉수 * log(Post 전체 레코드)`
  - 각 회원의 게시물테이블에 접근하여 전체 게시물을 반환해줌 
  - 팔로잉하는 회원들은 모두 or 이라서 -> 
    - 해당 회원의 Following 수만큼 Post를 전체 레코드를 반복해서 읽음
  
  
- 해당 회원의 팔로우들를 찾아서 모든 팔로우들의 Post를 각각 Post테이블을 스캔해야함 
  - **팔로잉 수가 많을 수록 부하가 엄청 걸림!**

- 위 방식을 `Fan Out On Read(Pull Model) 방식` 
  - 사용자가 매번 홈에 접속할 때마다 부하가 발생! 
 
>  우리가 구현한 **이 플로우의 시간 복잡도를 구할 수 있고**, 그에 따른 병목이 생기는 부분을 캐치하자!

## Fan Out On Write(Push Model)
- 게시물 작성시, 해당 회원을 팔로우하는 회원들에게 데이터를 배달한다. 

- e.x. 
  - 3번유저가 게시물을 작성하면 나를 팔로우하는 유저를 찾고, 
  - 타임라인 테이블에 게시물id와 전달할 멤버의id를 넣어준다 

### 타임라인 조회시에는 Timeline 테이블을 조회하여 게시물들을 조회 
- Pull 모델에서의 조회시점의 부하를 **쓰기시점의 부하로 치환**

---

- fackBook 은 PULL Model을 사용하고,
- twitter는 PUSH Model을 사용! 
