# 데이터베이스는 왜 병목이 될까

- 알아보기 전에 스케일 업과 스케일 아웃에 대해 알아보자

![scaleup-scaleout.png](image%2Fscaleup-scaleout.png)

1. 스케일업 : 하나의 서버의 사양을 늘린다는 개념
2. 스케일아웃 : 하나의 서버에 부하가 많으면 서버 대수를 늘린다.

|           | 스케일 업            | 스케일 아웃                   |
|-----------|------------------|--------------------------|
| 유지보수 및 관리 | 쉬움               | 여러 노드에 적절히 분산 필요(로드 밸런싱) |
| 확장성       | 제약 있음            | 스케일업에 비해 자유로움            |
| 장애복구      | 서버가 1대, 다운타임이 있음 | 장애 탄력성이 있음               |

-> 대용량 트래픽 처리를 위해서라면 **스케일 아웃이 더 유리해 보인다.**

---

### 언제 스케일 아웃이 가능한가? 

- 같은 입력에 대해서는 항상 같은 결과를 반환하고
- 여러 서버는 하나의 데이터베이스를 바라 봐야한다. 

##### 스케일 아웃의 전제 조건
**상태가 없어야 한다.**

- 하지만 **DB는 데이터라는 상태를 관리하고 있어** 서버보다 스케일 아웃을 하기 위해서는 **훨씬 많은 비용이 필요**
- 현대 서버 아키텍처는 **상태관리를 DB에 위임**하고, 
- **서버는 상태관리를 하지 않는** 방향으로 발전
  - 서버는 자유롭게 스케일 아웃을 할 수있는 구조로 발전되고,
  - DB는 자유롭게 스케일 아웃하기 어렵다

---
#### DB가 병목이 생기는 이유

1. DB는 위와 같이 상태관리 까지 맡아서 자유롭게 스케일 아웃 하기 어렵다.
2. DB는 디스크의 데이터를 접근해서 가져와서 처리 속도가 느려진다.
3. 또 서버와 DB 사이에 네트워크 상황에 따라서 속도가 느려질 수 있다.

---

